"use strict";(self.webpackChunkcxr_mall_platform_webui=self.webpackChunkcxr_mall_platform_webui||[]).push([[469],{42353:function(e,l,r){r.r(l),r.d(l,{default:function(){return D}});var n=r(13448),a=r.n(n),t=r(74815),o=r.n(t),s=r(28152),i=r.n(s),c="LayoutContainer___uA6ro",u="breadcrumb___a2Kcm",d="content____u2tu",m="footer___tRHoT",f=r(48933),p={name:""},h=function(e){return(0,f.Z)(e)},b=r(59505),x=r(53254),v=r(17728),g=r(11516),_=r(77180),j=r(31596),w=r(22222),Z=r(26633),k=r(93236),F=r(74306),q=r.n(F),P=q()({applet:{code:1,label:"微信小程序"},official:{code:2,label:"微信公众号"},app:{code:3,label:"APP"},h5:{code:4,label:"H5"},zfb:{code:5,label:"支付宝小程序"},qq:{code:6,label:"QQ小程序"},headlines:{code:7,label:"头条小程序"}}),C=q()({mall:{code:1,label:"商城订单"},store:{code:2,label:"店铺自提订单"},sale:{code:3,label:"秒杀订单"},integral:{code:4,label:"积分订单"},teamwork:{code:5,label:"拼团订单"}}),N=r(85966),y=r(63833),T=r(67976),S=r(98603),B=r(70385),R=r(79513),V=r(49400),Y=r(56050),A=r(77709),I=r(62086),L=function(){var e=A.Z.useFormInstance();return(0,I.jsxs)(N.Z,{bodyStyle:{padding:"24px",borderBottom:"1px solid #eceef2"},headStyle:{padding:"16px 24px",borderBottom:"1px solid #eceef2"},title:"基础设置",children:[(0,I.jsx)(y.Z,{width:328,fieldProps:{maxLength:20,showCount:!0,onBlur:function(l){var r;e.setFieldValue("name",String(null==l||null===(r=l.target)||void 0===r?void 0:r.value).trim())}},name:"name",label:"订单名称",placeholder:"请输入订单名称",validateTrigger:"onBlur",rules:[{required:!0,message:"请输入订单名称"}]}),(0,I.jsx)(T.Z,{width:328,name:"desc",label:"订单描述",placeholder:"请输入订单描述",fieldProps:{rows:4,maxLength:500,showCount:!0,className:"ik-form-item-count",onBlur:function(l){var r;e.setFieldValue("desc",String(null==l||null===(r=l.target)||void 0===r?void 0:r.value).trim())}},rules:[{required:!0,message:"请输入订单描述"}]}),(0,I.jsx)(S.Z,{width:328,name:"status",label:"订单状态",request:o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{label:"全部",value:"all"},{label:"未解决",value:"open"},{label:"已解决",value:"closed"},{label:"解决中",value:"processing"}]);case 1:case"end":return e.stop()}}),e)}))),placeholder:"请选择订单状态",rules:[{required:!0,message:"请选择订单状态"}]}),(0,I.jsx)(B.Z,{name:"switch",label:"支付状态",rules:[{required:!0,message:"请选择支付状态"}]}),(0,I.jsx)(R.Z,{name:"timeRange",label:"订单时间",placeholder:["开始日期","结束日期"],fieldProps:{format:"YYYY-MM-DD"},rules:[{required:!0,message:"请选择订单时间"}]}),(0,I.jsx)(V.Z.Group,{name:"order_source",label:"订单来源",options:P.$options(),rules:[{required:!0,message:"请选择订单来源"}]}),(0,I.jsx)(Y.Z.Group,{name:"order_source_checkbox",label:"订单类型",options:C.$options(),rules:[{required:!0,message:"请选择订单类型"}]})]})},D=function(){var e=(0,k.useState)(!1),l=i()(e,2),r=l[0],n=l[1],t=(0,k.useRef)(),s=(0,x.useSearchParams)(),F=i()(s,1)[0].get("id"),q=(0,x.useNavigate)();(0,k.useEffect)((function(){F?function(){if(!F)return!1;n(!0)}():function(){var e,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=h(l);null===(e=t.current)||void 0===e||e.setFieldsValue(r)}()}),[]);var P=function(){r||g.Z.confirm({title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("i",{className:"iconfont icon-error-circle-filled"}),"温馨提示"]}),width:432,content:"即将离开页面，将不会保存已编辑的内容，是否确认离开？",okText:"确定",cancelText:"取消",centered:!0,onOk:function(){return new Promise((function(e){q("/order"),e()}))}})};return(0,I.jsxs)("div",{className:c,children:[(0,I.jsxs)(_.Z,{className:u,children:[(0,I.jsx)(_.Z.Item,{children:(0,I.jsx)("a",{onClick:P,children:"订单管理"})}),(0,I.jsxs)(_.Z.Item,{children:[F?"编辑":"新增","订单"]})]}),(0,I.jsx)(j.Z,{spinning:r,wrapperClassName:d,children:(0,I.jsx)(b.A,{formRef:t,submitter:!1,scrollToFirstError:!0,omitNil:!0,children:(0,I.jsx)(L,{})})}),(0,I.jsxs)(w.Z,{className:m,children:[(0,I.jsx)(Z.ZP,{onClick:P,children:"取消"}),(0,I.jsx)(Z.ZP,{htmlType:"submit",type:"primary",onClick:function(){var e,l;null===(e=t.current)||void 0===e||null===(l=e.validateFieldsReturnFormatValue)||void 0===l||l.call(e).then(o()(a()().mark((function e(){var l,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===(l=t.current)||void 0===l?void 0:l.getFieldsValue(!0),n=r,(0,f.Z)(n);case 3:case"end":return e.stop()}var n}),e)})))).catch((function(e){var l;v.ZP.warning("请完善信息后，再保存"),null===(l=t.current)||void 0===l||l.scrollToField(e.errorFields[0].name)}))},loading:r,children:"保存"})]})]})}}}]);